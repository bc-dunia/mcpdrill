{
  "schema_version": "run-config/v1",
  "target": {
    "kind": "gateway",
    "url": "https://staging.example.com/mcp",
    "transport": "streamable_http",
    "redirect_policy": {
      "mode": "deny"
    },
    "identification": {
      "run_id_header": {
        "name": "X-Test-Run-Id",
        "value_template": "${run_id}"
      },
      "user_agent": {
        "value": "mcpdrill/1.0 run_id=${run_id}"
      }
    }
  },
  "environment": {
    "allowlist": {
      "mode": "deny_by_default",
      "entries": [
        {"kind": "suffix", "value": ".example.com"}
      ]
    }
  },
  "workload": {
    "operation_mix": [
      {"operation": "tools_list", "weight": 1}
    ],
    "in_flight_per_vu": 1
  },
  "stages": [
    {
      "stage": "preflight",
      "enabled": true,
      "duration_ms": 60000,
      "load": {"target_vus": -5, "target_rps": 1}
    },
    {
      "stage": "baseline",
      "enabled": true,
      "duration_ms": 60000,
      "load": {"target_vus": 5, "target_rps": 10},
      "stop_conditions": [
        {"id": "sc1", "metric": "error_rate", "comparator": ">", "threshold": 0.05, "window_ms": 30000, "sustain_windows": 2, "scope": {}}
      ]
    },
    {
      "stage": "ramp",
      "enabled": true,
      "duration_ms": 120000,
      "load": {"target_vus": 10, "target_rps": 20},
      "stop_conditions": [
        {"id": "sc2", "metric": "error_rate", "comparator": ">", "threshold": 0.1, "window_ms": 30000, "sustain_windows": 2, "scope": {}}
      ]
    }
  ],
  "safety": {
    "hard_caps": {
      "max_vus": 100,
      "max_rps": 1000,
      "max_duration_ms": 3600000,
      "max_in_flight_per_vu": 10
    },
    "identification_required": true
  }
}
